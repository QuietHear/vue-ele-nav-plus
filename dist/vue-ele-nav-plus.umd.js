(function(e,f){typeof exports=="object"&&typeof module<"u"?module.exports=f(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],f):(e=typeof globalThis<"u"?globalThis:e||self,e.vueEleNavPlus=f(e.Vue,e.vueRouter))})(this,function(e,f){"use strict";const H="",_={key:0,class:"vue-ele-nav-plus-box"},T=["onClick"],b=["onClick"],R=["onClick"],I=["onClick"],W=["onClick"],j=["onClick"],A=[{__name:"index",props:{menu:{type:Array,default:()=>[]},onlyShowFirst:{type:Boolean,default:!1},i18n:{type:Boolean,default:!1},clickParentJump:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},collapseMaxWidth:{type:Number,default:960},showCollapseBtn:{type:Boolean,default:!0},openBtnClass:{type:String,default:"el/Expand"},closeBtnClass:{type:String,default:"el/Fold"}},emits:["collapseChange"],setup(i,{emit:w}){const B=i,q=f.useRouter(),N=f.useRoute(),C=e.ref([]),E=e.ref(!1),$=e.ref([]),k=e.ref([]);e.watch(()=>B.menu,()=>{F()});const F=async()=>{if(E.value=!1,C.value=JSON.parse(JSON.stringify(B.menu)),C.value.length>0){J(C.value),k.value=JSON.parse(JSON.stringify(C.value)),P(k.value);let o=(await S(C.value,N.name)).index;M(o),E.value=!0,L()}},J=(n,o)=>{n.forEach((a,r)=>{a.index=`${o!==void 0?o+"-":""}${r}`,a.active=!1,a.icon=a.icon?a.icon.split("/"):void 0,a.children&&a.children.length>0?J(a.children,a.index):a.children=[]})},M=(n,o=0)=>{const a=n.split("-"),r=a.slice(0,o+1).join("-");$.value.push(r),o+=1,o<a.length-1&&M(n,o)},P=n=>{for(let o=0;o<n.length;o++)n[o].show!==!1?!B.onlyShowFirst&&n[o].children&&n[o].children.length>0?P(n[o].children):n[o].children=[]:(n.splice(o,1),o-=1)};e.watch(N,()=>{L()});const L=async()=>{O(k.value);let n=await S(C.value,N.name);if(B.onlyShowFirst){let o=n.index.split("-")[0];k.value.filter(a=>a.index===o).length>0&&m(k.value,o)}else if(n.markName){let o=await S(k.value,n.markName);m(k.value,o.index)}else m(k.value,n.index)},O=n=>{n.forEach(o=>{o.active=!1,o.children.length>0&&O(o.children)})},m=(n,o,a=0)=>{const r=o.split("-"),p=r.slice(0,a+1).join("-");let g=n.filter(D=>D.index===p);g.length>0&&(g[0].active=!0,a+=1,a<r.length&&m(g[0].children,o,a))},S=(n,o)=>new Promise(a=>{n.forEach(r=>{r.name===o?a(r):r.children.length>0&&S(r.children,o).then(p=>{a(p)})})}),d=n=>{q.push({name:n.name})};F();const y=e.ref(B.openBtnClass.split("/")),x=e.ref(B.closeBtnClass.split("/"));let h=e.ref(!1);const z=()=>{B.collapseMaxWidth>0&&(h.value=document.body.clientWidth<B.collapseMaxWidth),w("collapseChange",h.value)},U=()=>{h.value=!h.value,w("collapseChange",h.value)};return e.onMounted(()=>{z(),window.addEventListener("resize",z)}),e.onBeforeUnmount(()=>{window.removeEventListener("resize",z)}),(n,o)=>{const a=e.resolveComponent("el-icon"),r=e.resolveComponent("el-menu-item"),p=e.resolveComponent("el-sub-menu"),g=e.resolveComponent("el-menu"),D=e.resolveComponent("el-scrollbar");return n.$attrs.mode!=="horizontal"?(e.openBlock(),e.createElementBlock("div",_,[e.createVNode(D,null,{default:e.withCtx(()=>[E.value?(e.openBlock(),e.createBlock(g,e.mergeProps({key:0,"default-openeds":$.value,class:"vue-ele-nav-plus",collapse:e.unref(h)},n.$attrs),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:l.index},[l.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(l.active?"replace-active":""),"popper-class":"vue-ele-nav-plus-hor-first",index:l.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:t=>!i.clickParentJump&&l.showSelf!==!0||d(l)},[l.icon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.icon[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon[1])))]),_:2},1024)):l.icon[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+l.icon[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(l.icon[0])},e.toDisplayString(l.icon[1]),3))],64)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(i.i18n?n.$t(l.title):l.title),1)],8,T)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.children,t=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:t.index},[t.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(t.active?"replace-active-child":""),"popper-class":"second",index:t.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:c=>!i.clickParentJump&&t.showSelf!==!0||d(t)},e.toDisplayString(i.i18n?n.$t(t.title):t.title),9,b)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,c=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:c.index},[c.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(c.active?"replace-active-child":""),"popper-class":"third",index:c.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:s=>!i.clickParentJump&&c.showSelf!==!0||d(c)},e.toDisplayString(i.i18n?n.$t(c.title):c.title),9,R)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.children,s=>(e.openBlock(),e.createBlock(r,{key:s.index,class:e.normalizeClass(s.active?"replace-active-child":""),index:s.index,onClick:G=>d(s)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(s.title):s.title),1)]),_:2},1032,["class","index","onClick"]))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(c.active?"replace-active-child":""),index:c.index,onClick:s=>d(c)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(c.title):c.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(t.active?"replace-active-child":""),index:t.index,onClick:c=>d(t)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(t.title):t.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(l.active?"replace-active":""),index:l.index,onClick:t=>d(l)},{default:e.withCtx(()=>[l.icon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.icon[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon[1])))]),_:2},1024)):l.icon[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+l.icon[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(l.icon[0])},e.toDisplayString(l.icon[1]),3))],64)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(i.i18n?n.$t(l.title):l.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:1},16,["default-openeds","collapse"])):e.createCommentVNode("",!0)]),_:1}),i.collapseMaxWidth>0&&i.showCollapseBtn?(e.openBlock(),e.createElementBlock("div",{key:0,class:"collapse-btn",onClick:U},[e.unref(h)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[y.value[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(y.value[1])))]),_:1})):y.value[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+y.value[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(y.value[0])},e.toDisplayString(y.value[1]),3))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[x.value[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(x.value[1])))]),_:1})):x.value[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+x.value[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(x.value[0])},e.toDisplayString(x.value[1]),3))],64))])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[E.value?(e.openBlock(),e.createBlock(g,{key:0,"default-openeds":$.value,class:"vue-ele-nav-plus"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,l=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:l.index},[l.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(l.active?"replace-active":""),"popper-class":"vue-ele-nav-plus-hor-first",index:l.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:t=>!i.clickParentJump&&l.showSelf!==!0||d(l)},[l.icon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.icon[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon[1])))]),_:2},1024)):l.icon[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+l.icon[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(l.icon[0])},e.toDisplayString(l.icon[1]),3))],64)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(i.i18n?n.$t(l.title):l.title),1)],8,I)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.children,t=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:t.index},[t.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(t.active?"replace-active-child":""),"popper-class":"second",index:t.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:c=>!i.clickParentJump&&t.showSelf!==!0||d(t)},e.toDisplayString(i.i18n?n.$t(t.title):t.title),9,W)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,c=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:c.index},[c.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:e.normalizeClass(c.active?"replace-active-child":""),"popper-class":"third",index:c.index},{title:e.withCtx(()=>[e.createElementVNode("div",{class:"parent-title",onClick:s=>!i.clickParentJump&&c.showSelf!==!0||d(c)},e.toDisplayString(i.i18n?n.$t(c.title):c.title),9,j)]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.children,s=>(e.openBlock(),e.createBlock(r,{key:s.index,class:e.normalizeClass(s.active?"replace-active-child":""),index:s.index,onClick:G=>d(s)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(s.title):s.title),1)]),_:2},1032,["class","index","onClick"]))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(c.active?"replace-active-child":""),index:c.index,onClick:s=>d(c)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(c.title):c.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(t.active?"replace-active-child":""),index:t.index,onClick:c=>d(t)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.i18n?n.$t(t.title):t.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(e.openBlock(),e.createBlock(r,{key:1,class:e.normalizeClass(l.active?"replace-active":""),index:l.index,onClick:t=>d(l)},{default:e.withCtx(()=>[l.icon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.icon[0]==="el"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon[1])))]),_:2},1024)):l.icon[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+l.icon[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(l.icon[0])},e.toDisplayString(l.icon[1]),3))],64)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(i.i18n?n.$t(l.title):l.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:1},8,["default-openeds"])):e.createCommentVNode("",!0)],64))}}}],V={install(i){A.forEach(w=>{i.component("vueEleNavPlus",w)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(V),V});
