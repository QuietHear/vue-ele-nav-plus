(function(o,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],d):(o=typeof globalThis<"u"?globalThis:o||self,o.vueEleNavPlus=d(o.Vue,o.vueRouter))})(this,function(o,d){"use strict";const K="",A={class:"vue-ele-nav-plus-box"},j=["onClick"],q=["onClick"],O=["onClick"],U=[{__name:"index",props:{menu:{type:Array,default:()=>[]},onlyShowFirst:{type:Boolean,default:!1},i18n:{type:Boolean,default:!1},clickParentJump:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!0},collapseMaxWidth:{type:Number,default:960},showCollapseBtn:{type:Boolean,default:!0},openBtn:{type:Object,default:()=>({type:"el",icon:"Fold"})},closeBtn:{type:Object,default:()=>({type:"el",icon:"Expand"})},popDark:{type:Boolean,default:!1}},emits:["collapseChange"],setup(n,{expose:w,emit:F}){const i=n,G=d.useRouter(),P=d.useRoute(),E=o.useAttrs(),$=o.ref(null);let m=[],M=[];const D=o.ref(!1),L=o.ref([]),B=o.ref([]);o.watch(()=>i.onlyShowFirst,()=>{z()}),o.watch(()=>i.menu,()=>{z()});const C=l=>{let a=l instanceof Array?[]:{};for(let r in l)a[r]=typeof l[r]=="object"?C(l[r]):l[r];return a},z=async()=>{if(D.value=!1,m=C(i.menu),m.length>0){T(m),B.value=C(m),b(B.value);let a=N(P.name).index;R(a),D.value=!0,I()}},T=(l,a)=>{l.forEach((r,p)=>{r.index=`${a!==void 0?a+"-":""}${p}`,r.active=!1,r.icon=r.icon||void 0,r.children&&r.children.length>0?T(r.children,r.index):r.children=[],M.push(C(r))})},R=(l,a=0)=>{const r=l.split("-"),p=r.slice(0,a+1).join("-");L.value.push(p),a+=1,a<r.length-1&&R(l,a)},b=l=>{for(let a=0;a<l.length;a++)l[a].show!==!1?!i.onlyShowFirst&&l[a].children&&l[a].children.length>0?b(l[a].children):l[a].children=[]:(l.splice(a,1),a-=1)};o.watch(P,()=>{I()});const I=async()=>{W(B.value);let l=N(P.name);if(E.mode==="horizontal"&&o.nextTick(()=>{$.value.setScrollLeft(l.index.split("-")[0]*document.getElementsByClassName("vue-ele-nav-plus")[0].getElementsByTagName("li")[0].clientWidth)}),i.onlyShowFirst){let a=l.index.split("-")[0];B.value.filter(r=>r.index===a).length>0&&x(B.value,a)}else if(l.markName){let a=N(l.markName);x(B.value,a.index)}else x(B.value,l.index)},W=l=>{l.forEach(a=>{a.active=!1,a.children.length>0&&W(a.children)})},x=(l,a,r=0)=>{const p=a.split("-"),h=p.slice(0,r+1).join("-");let g=l.filter(S=>S.index===h);g.length>0&&(g[0].active=!0,r+=1,r<p.length&&x(g[0].children,a,r))},N=l=>M.filter(a=>a.name===l)[0],y=l=>{G.push({name:l.name})};z();let k=o.ref(!1);i.autoCollapse||(k.value=i.collapse),E.mode!=="horizontal"&&o.watch(()=>i.autoCollapse,()=>{i.autoCollapse?(f(),window.addEventListener("resize",f)):(k.value=i.collapse,window.removeEventListener("resize",f))});const f=()=>{i.collapseMaxWidth>0&&(k.value=document.body.clientWidth<i.collapseMaxWidth),F("collapseChange",k.value)},J=()=>{k.value=!k.value,F("collapseChange",k.value)},H=()=>k.value;return o.onMounted(()=>{E.mode!=="horizontal"&&i.autoCollapse&&(f(),window.addEventListener("resize",f))}),o.onBeforeUnmount(()=>{window.removeEventListener("resize",f)}),w({manualChange:J,getNowCollapse:H}),(l,a)=>{const r=o.resolveComponent("el-icon"),p=o.resolveComponent("el-menu-item"),h=o.resolveComponent("el-sub-menu"),g=o.resolveComponent("el-menu"),S=o.resolveComponent("el-scrollbar");return o.openBlock(),o.createElementBlock("div",A,[o.createVNode(S,{ref_key:"scroll",ref:$},{default:o.withCtx(()=>[o.unref(D)?(o.openBlock(),o.createBlock(g,o.mergeProps({key:0,class:"vue-ele-nav-plus","default-openeds":l.$attrs.mode!=="horizontal"?o.unref(L):[],collapse:o.unref(k),ellipsis:!1},l.$attrs),{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(B),t=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:t.index},[t.children.length>0?(o.openBlock(),o.createBlock(h,{key:0,class:o.normalizeClass(t.active?"replace-active":""),"popper-class":"vue-ele-nav-plus-poper"+(n.popDark?" dark":""),index:t.index},{title:o.withCtx(()=>[o.createElementVNode("div",{class:"parent-title",onClick:e=>!n.clickParentJump&&t.showSelf!==!0||y(t)},[t.icon&&(t.icon.icon||t.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[t.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t.icon.icon),o.normalizeProps(o.mergeProps({key:0},t.icon.attrs)),null,16)):t.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},t.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t.icon.icon)))]),_:2},1040)):t.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+t.icon.icon]},t.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:t.icon.type},t.icon.attrs),o.toDisplayString(t.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createElementVNode("span",null,o.toDisplayString(n.i18n?l.$t(t.title):t.title),1)],8,j)]),default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(t.children,e=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:e.index},[e.children.length>0?(o.openBlock(),o.createBlock(h,{key:0,class:o.normalizeClass(e.active?"replace-active-child":""),"popper-class":"second",index:e.index},{title:o.withCtx(()=>[o.createElementVNode("div",{class:"parent-title",onClick:c=>!n.clickParentJump&&e.showSelf!==!0||y(e)},[e.icon&&(e.icon.icon||e.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[e.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.icon.icon),o.normalizeProps(o.mergeProps({key:0},e.icon.attrs)),null,16)):e.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},e.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.icon.icon)))]),_:2},1040)):e.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+e.icon.icon]},e.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:e.icon.type},e.icon.attrs),o.toDisplayString(e.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createTextVNode(" "+o.toDisplayString(n.i18n?l.$t(e.title):e.title),1)],8,q)]),default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.children,c=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:c.index},[c.children.length>0?(o.openBlock(),o.createBlock(h,{key:0,class:o.normalizeClass(c.active?"replace-active-child":""),"popper-class":"third",index:c.index},{title:o.withCtx(()=>[o.createElementVNode("div",{class:"parent-title",onClick:s=>!n.clickParentJump&&c.showSelf!==!0||y(c)},[c.icon&&(c.icon.icon||c.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[c.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(c.icon.icon),o.normalizeProps(o.mergeProps({key:0},c.icon.attrs)),null,16)):c.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},c.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(c.icon.icon)))]),_:2},1040)):c.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+c.icon.icon]},c.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:c.icon.type},c.icon.attrs),o.toDisplayString(c.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createTextVNode(" "+o.toDisplayString(n.i18n?l.$t(c.title):c.title),1)],8,O)]),default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.children,s=>(o.openBlock(),o.createBlock(p,{key:s.index,class:o.normalizeClass(s.active?"replace-active-child":""),index:s.index,onClick:X=>y(s)},{default:o.withCtx(()=>[s.icon&&(s.icon.icon||s.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[s.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(s.icon.icon),o.normalizeProps(o.mergeProps({key:0},s.icon.attrs)),null,16)):s.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},s.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(s.icon.icon)))]),_:2},1040)):s.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+s.icon.icon]},s.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:s.icon.type},s.icon.attrs),o.toDisplayString(s.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createTextVNode(" "+o.toDisplayString(n.i18n?l.$t(s.title):s.title),1)]),_:2},1032,["class","index","onClick"]))),128))]),_:2},1032,["class","index"])):(o.openBlock(),o.createBlock(p,{key:1,class:o.normalizeClass(c.active?"replace-active-child":""),index:c.index,onClick:s=>y(c)},{default:o.withCtx(()=>[c.icon&&(c.icon.icon||c.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[c.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(c.icon.icon),o.normalizeProps(o.mergeProps({key:0},c.icon.attrs)),null,16)):c.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},c.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(c.icon.icon)))]),_:2},1040)):c.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+c.icon.icon]},c.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:c.icon.type},c.icon.attrs),o.toDisplayString(c.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createTextVNode(" "+o.toDisplayString(n.i18n?l.$t(c.title):c.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(o.openBlock(),o.createBlock(p,{key:1,class:o.normalizeClass(e.active?"replace-active-child":""),index:e.index,onClick:c=>y(e)},{default:o.withCtx(()=>[e.icon&&(e.icon.icon||e.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[e.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.icon.icon),o.normalizeProps(o.mergeProps({key:0},e.icon.attrs)),null,16)):e.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},e.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.icon.icon)))]),_:2},1040)):e.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+e.icon.icon]},e.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:e.icon.type},e.icon.attrs),o.toDisplayString(e.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createTextVNode(" "+o.toDisplayString(n.i18n?l.$t(e.title):e.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","popper-class","index"])):(o.openBlock(),o.createBlock(p,{key:1,class:o.normalizeClass(t.active?"replace-active":""),index:t.index,onClick:e=>y(t)},{default:o.withCtx(()=>[t.icon&&(t.icon.icon||t.icon.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[t.icon.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t.icon.icon),o.normalizeProps(o.mergeProps({key:0},t.icon.attrs)),null,16)):t.icon.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},t.icon.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t.icon.icon)))]),_:2},1040)):t.icon.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+t.icon.icon]},t.icon.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:t.icon.type},t.icon.attrs),o.toDisplayString(t.icon.icon),17))],64)):o.createCommentVNode("",!0),o.createElementVNode("span",null,o.toDisplayString(n.i18n?l.$t(t.title):t.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:1},16,["default-openeds","collapse"])):o.createCommentVNode("",!0)]),_:1},512),l.$attrs.mode!=="horizontal"&&n.collapseMaxWidth>0&&n.showCollapseBtn?(o.openBlock(),o.createElementBlock("div",{key:0,class:"collapse-btn",onClick:J},[o.unref(k)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[n.closeBtn&&(n.closeBtn.icon||n.closeBtn.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[n.closeBtn.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n.closeBtn.icon),o.mergeProps({key:0,class:"menu-icon"},n.closeBtn.attrs),null,16)):n.closeBtn.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},n.closeBtn.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n.closeBtn.icon)))]),_:1},16)):n.closeBtn.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+n.closeBtn.icon]},n.closeBtn.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:n.closeBtn.type},n.closeBtn.attrs),o.toDisplayString(n.closeBtn.icon),17))],64)):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[n.openBtn&&(n.openBtn.icon||n.openBtn.type)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[n.openBtn.type==="custom"?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n.openBtn.icon),o.mergeProps({key:0,class:"menu-icon"},n.openBtn.attrs),null,16)):n.openBtn.type==="el"?(o.openBlock(),o.createBlock(r,o.normalizeProps(o.mergeProps({key:1},n.openBtn.attrs)),{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n.openBtn.icon)))]),_:1},16)):n.openBtn.type==="iconfont"?(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:2,class:["icon iconfont","icon-"+n.openBtn.icon]},n.openBtn.attrs),null,16)):(o.openBlock(),o.createElementBlock("i",o.mergeProps({key:3,class:n.openBtn.type},n.openBtn.attrs),o.toDisplayString(n.openBtn.icon),17))],64)):o.createCommentVNode("",!0)],64))])):o.createCommentVNode("",!0)])}}}],V={install(n){U.forEach(w=>{n.component("vueEleNavPlus",w)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(V),V});
