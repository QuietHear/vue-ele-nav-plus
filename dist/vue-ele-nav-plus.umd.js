(function(n,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],y):(n=typeof globalThis<"u"?globalThis:n||self,n.vueEleNavPlus=y(n.Vue,n.vueRouter))})(this,function(n,y){"use strict";const K="",I=(a,f)=>{const i=a.__vccOpts||a;for(const[l,_]of f)i[l]=_;return i},J={name:"vueEleNavPlus",emits:["collapseChange"],props:{menu:{type:Array,default:()=>[]},onlyShowFirst:{type:Boolean,default:!1},i18n:{type:Boolean,default:!1},clickParentJump:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},collapseMaxWidth:{type:Number,default:960},showCollapseBtn:{type:Boolean,default:!0},openBtnClass:{type:String,default:"el/Expand"},closeBtnClass:{type:String,default:"el/Fold"}},setup(a,{attrs:f,slots:i,emit:l,expose:_}){const V=y.useRouter(),C=y.useRoute(),d=n.ref([]),p=n.ref(!1),g=n.ref([]),B=n.ref([]);n.watch(()=>a.menu,()=>{e()});const e=async()=>{if(p.value=!1,d.value=JSON.parse(JSON.stringify(a.menu)),d.value.length>0){o(d.value),B.value=JSON.parse(JSON.stringify(d.value)),k(B.value);let c=(await E(d.value,C.name)).index;t(c),p.value=!0,m()}},o=(r,c)=>{r.forEach((s,h)=>{s.index=`${c!==void 0?c+"-":""}${h}`,s.active=!1,s.icon=s.icon?s.icon.split("/"):void 0,s.children&&s.children.length>0?o(s.children,s.index):s.children=[]})},t=(r,c=0)=>{const s=r.split("-"),h=s.slice(0,c+1).join("-");g.value.push(h),c+=1,c<s.length-1&&t(r,c)},k=r=>{for(let c=0;c<r.length;c++)r[c].show!==!1?!a.onlyShowFirst&&r[c].children&&r[c].children.length>0?k(r[c].children):r[c].children=[]:(r.splice(c,1),c-=1)};n.watch(C,()=>{m()});const m=async()=>{F(B.value);let r=await E(d.value,C.name);if(a.onlyShowFirst){let c=r.index.split("-")[0];B.value.filter(s=>s.index===c).length>0&&w(B.value,c)}else if(r.markName){let c=await E(B.value,r.markName);w(B.value,c.index)}else w(B.value,r.index)},F=r=>{r.forEach(c=>{c.active=!1,c.children.length>0&&F(c.children)})},w=(r,c,s=0)=>{const h=c.split("-"),N=h.slice(0,s+1).join("-");let z=r.filter(H=>H.index===N);z.length>0&&(z[0].active=!0,s+=1,s<h.length&&w(z[0].children,c,s))},E=(r,c)=>new Promise(s=>{r.forEach(h=>{h.name===c?s(h):h.children.length>0&&E(h.children,c).then(N=>{s(N)})})}),j=r=>{V.push({name:r.name})};e();const q=n.ref(a.openBtnClass.split("/")),U=n.ref(a.closeBtnClass.split("/"));let x=n.ref(!1);const S=()=>{a.collapseMaxWidth>0&&(x.value=document.body.clientWidth<a.collapseMaxWidth),l("collapseChange",x.value)},G=()=>{x.value=!x.value,l("collapseChange",x.value)};return n.onMounted(()=>{S(),window.addEventListener("resize",S)}),n.onBeforeUnmount(()=>{window.removeEventListener("resize",S)}),{opens:g,init:p,navInformation:B,menuItemClick:j,openBtnArr:q,closeBtnArr:U,isCollapse:x,manualChange:G}}},A={key:0,class:"vue-ele-nav-plus-box"},P=["onClick"],M=["onClick"],O=["onClick"],L=["onClick"],T=["onClick"],b=["onClick"];function R(a,f,i,l,_,V){const C=n.resolveComponent("el-icon"),d=n.resolveComponent("el-menu-item"),p=n.resolveComponent("el-sub-menu"),g=n.resolveComponent("el-menu"),B=n.resolveComponent("el-scrollbar");return a.$attrs.mode!=="horizontal"?(n.openBlock(),n.createElementBlock("div",A,[n.createVNode(B,null,{default:n.withCtx(()=>[l.init?(n.openBlock(),n.createBlock(g,n.mergeProps({key:0,"default-openeds":l.opens,class:"vue-ele-nav-plus",collapse:l.isCollapse},a.$attrs),{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(l.navInformation,e=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:e.index},[e.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(e.active?"replace-active":""),"popper-class":"vue-ele-nav-plus-hor-first",index:e.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:o=>!i.clickParentJump&&e.showSelf!==!0||l.menuItemClick(e)},[e.icon?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[e.icon[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(e.icon[1])))]),_:2},1024)):e.icon[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+e.icon[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(e.icon[0])},n.toDisplayString(e.icon[1]),3))],64)):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(i.i18n?a.$t(e.title):e.title),1)],8,P)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(e.children,o=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:o.index},[o.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(o.active?"replace-active-child":""),"popper-class":"second",index:o.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:t=>!i.clickParentJump&&o.showSelf!==!0||l.menuItemClick(o)},n.toDisplayString(i.i18n?a.$t(o.title):o.title),9,M)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(o.children,t=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:t.index},[t.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(t.active?"replace-active-child":""),"popper-class":"third",index:t.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:k=>!i.clickParentJump&&t.showSelf!==!0||l.menuItemClick(t)},n.toDisplayString(i.i18n?a.$t(t.title):t.title),9,O)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(t.children,k=>(n.openBlock(),n.createBlock(d,{key:k.index,class:n.normalizeClass(k.active?"replace-active-child":""),index:k.index,onClick:m=>l.menuItemClick(k)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(k.title):k.title),1)]),_:2},1032,["class","index","onClick"]))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(t.active?"replace-active-child":""),index:t.index,onClick:k=>l.menuItemClick(t)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(t.title):t.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(o.active?"replace-active-child":""),index:o.index,onClick:t=>l.menuItemClick(o)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(o.title):o.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(e.active?"replace-active":""),index:e.index,onClick:o=>l.menuItemClick(e)},{default:n.withCtx(()=>[e.icon?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[e.icon[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(e.icon[1])))]),_:2},1024)):e.icon[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+e.icon[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(e.icon[0])},n.toDisplayString(e.icon[1]),3))],64)):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(i.i18n?a.$t(e.title):e.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:1},16,["default-openeds","collapse"])):n.createCommentVNode("",!0)]),_:1}),i.collapseMaxWidth>0&&i.showCollapseBtn?(n.openBlock(),n.createElementBlock("div",{key:0,class:"collapse-btn",onClick:f[0]||(f[0]=(...e)=>l.manualChange&&l.manualChange(...e))},[l.isCollapse?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[l.openBtnArr[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(l.openBtnArr[1])))]),_:1})):l.openBtnArr[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+l.openBtnArr[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(l.openBtnArr[0])},n.toDisplayString(l.openBtnArr[1]),3))],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[l.closeBtnArr[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(l.closeBtnArr[1])))]),_:1})):l.closeBtnArr[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+l.closeBtnArr[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(l.closeBtnArr[0])},n.toDisplayString(l.closeBtnArr[1]),3))],64))])):n.createCommentVNode("",!0)])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[l.init?(n.openBlock(),n.createBlock(g,{key:0,"default-openeds":l.opens,class:"vue-ele-nav-plus"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(l.navInformation,e=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:e.index},[e.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(e.active?"replace-active":""),"popper-class":"vue-ele-nav-plus-hor-first",index:e.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:o=>!i.clickParentJump&&e.showSelf!==!0||l.menuItemClick(e)},[e.icon?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[e.icon[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(e.icon[1])))]),_:2},1024)):e.icon[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+e.icon[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(e.icon[0])},n.toDisplayString(e.icon[1]),3))],64)):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(i.i18n?a.$t(e.title):e.title),1)],8,L)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(e.children,o=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:o.index},[o.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(o.active?"replace-active-child":""),"popper-class":"second",index:o.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:t=>!i.clickParentJump&&o.showSelf!==!0||l.menuItemClick(o)},n.toDisplayString(i.i18n?a.$t(o.title):o.title),9,T)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(o.children,t=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:t.index},[t.children.length>0?(n.openBlock(),n.createBlock(p,{key:0,class:n.normalizeClass(t.active?"replace-active-child":""),"popper-class":"third",index:t.index},{title:n.withCtx(()=>[n.createElementVNode("div",{class:"parent-title",onClick:k=>!i.clickParentJump&&t.showSelf!==!0||l.menuItemClick(t)},n.toDisplayString(i.i18n?a.$t(t.title):t.title),9,b)]),default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(t.children,k=>(n.openBlock(),n.createBlock(d,{key:k.index,class:n.normalizeClass(k.active?"replace-active-child":""),index:k.index,onClick:m=>l.menuItemClick(k)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(k.title):k.title),1)]),_:2},1032,["class","index","onClick"]))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(t.active?"replace-active-child":""),index:t.index,onClick:k=>l.menuItemClick(t)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(t.title):t.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(o.active?"replace-active-child":""),index:o.index,onClick:t=>l.menuItemClick(o)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(i.i18n?a.$t(o.title):o.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:2},1032,["class","index"])):(n.openBlock(),n.createBlock(d,{key:1,class:n.normalizeClass(e.active?"replace-active":""),index:e.index,onClick:o=>l.menuItemClick(e)},{default:n.withCtx(()=>[e.icon?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[e.icon[0]==="el"?(n.openBlock(),n.createBlock(C,{key:0},{default:n.withCtx(()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(e.icon[1])))]),_:2},1024)):e.icon[0]==="iconfont"?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["icon iconfont","icon-"+e.icon[1]])},null,2)):(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(e.icon[0])},n.toDisplayString(e.icon[1]),3))],64)):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(i.i18n?a.$t(e.title):e.title),1)]),_:2},1032,["class","index","onClick"]))],64))),128))]),_:1},8,["default-openeds"])):n.createCommentVNode("",!0)],64))}const W=[I(J,[["render",R]])],D={install(a){W.forEach(f=>{a.component(f.name,f)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(D),D});
