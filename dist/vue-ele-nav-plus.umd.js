(function(e,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],d):(e=typeof globalThis<"u"?globalThis:e||self,e.vueEleNavPlus=d(e.Vue,e.vueRouter))})(this,function(e,d){"use strict";const a={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(o){return(B,k)=>{const x=e.resolveComponent("el-icon");return o.iconObj.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.iconObj.icon),e.normalizeProps(e.mergeProps({key:0},o.iconObj.attrs)),null,16)):o.iconObj.type==="el"?(e.openBlock(),e.createBlock(x,e.normalizeProps(e.mergeProps({key:1},o.iconObj.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.iconObj.icon)))]),_:1},16)):o.iconObj.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+o.iconObj.icon]},o.iconObj.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:o.iconObj.type},o.iconObj.attrs),e.toDisplayString(o.iconObj.icon),17))}}},I="",D={class:"vue-ele-nav-plus-box"},F={class:"parent-title"},S={class:"parent-title"},$={class:"parent-title"},P=[{__name:"index",props:{menu:{type:Array,default:()=>[]},onlyShowFirst:{type:Boolean,default:!1},i18n:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},showCollapseBtn:{type:Boolean,default:!0},openBtn:{type:Object,default:()=>({type:"el",icon:"Fold"})},closeBtn:{type:Object,default:()=>({type:"el",icon:"Expand"})},popDark:{type:Boolean,default:!1}},emits:["collapseChange"],setup(o,{emit:B}){const k=o,x=d.useRouter(),O=d.useRoute(),m=e.ref("");let y=[],j=[];const C=e.ref([]);e.watch(()=>k.onlyShowFirst,()=>{g()}),e.watch(()=>k.menu,()=>{g()});const f=n=>{let t=n instanceof Array?[]:{};for(let l in n)t[l]=typeof n[l]=="object"?f(n[l]):n[l];return t},g=async()=>{y=f(k.menu),y.length>0&&(N(y),C.value=f(y),V(C.value),E())},N=(n,t)=>{n.forEach((l,p)=>{l.index=`${t!==void 0?t+"-":""}${p}`,l.icon=l.icon||void 0,l.children&&l.children.length>0?N(l.children,l.index):l.children=[],j.push(f(l))})},V=n=>{for(let t=0;t<n.length;t++)n[t].show!==!1?!k.onlyShowFirst&&n[t].children&&n[t].children.length>0?V(n[t].children):n[t].children=[]:(n.splice(t,1),t-=1)};e.watch(O,()=>{E()});const E=()=>{var t;const n=b(O.name);m.value="",n&&(m.value=n.markName?(t=b(n.markName))==null?void 0:t.index:k.onlyShowFirst?n.index.split("-")[0]:n.index)},b=n=>j.filter(t=>t.index===n||t.name===n)[0],h=n=>{x.push({name:b(n.index).name})};return g(),(n,t)=>{const l=e.resolveComponent("el-menu-item"),p=e.resolveComponent("el-sub-menu"),u=e.resolveComponent("el-menu"),T=e.resolveComponent("el-scrollbar");return e.openBlock(),e.createElementBlock("div",D,[e.createVNode(T,null,{default:e.withCtx(()=>[e.createVNode(u,e.mergeProps({class:"vue-ele-nav-plus",ellipsis:!1,"default-active":e.unref(m),collapse:o.collapse},n.$attrs),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(C),c=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:c.index},[c.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,class:"first-menu","popper-class":"vue-ele-nav-plus-poper"+(o.popDark?" dark":""),index:c.index},{title:e.withCtx(()=>[e.createElementVNode("div",F,[c.icon&&(c.icon.icon||c.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:c.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(o.i18n?n.$t(c.title):c.title),1)])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.children,r=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:r.index},[r.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,"popper-class":"second",index:r.index},{title:e.withCtx(()=>[e.createElementVNode("div",S,[r.icon&&(r.icon.icon||r.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:r.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.i18n?n.$t(r.title):r.title),1)])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.children,i=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:i.index},[i.children.length>0?(e.openBlock(),e.createBlock(p,{key:0,"popper-class":"third",index:i.index},{title:e.withCtx(()=>[e.createElementVNode("div",$,[i.icon&&(i.icon.icon||i.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:i.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.i18n?n.$t(i.title):i.title),1)])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.children,s=>(e.openBlock(),e.createBlock(l,{key:s.index,index:s.index,onClick:h},{default:e.withCtx(()=>[s.icon&&(s.icon.icon||s.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:s.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.i18n?n.$t(s.title):s.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(e.openBlock(),e.createBlock(l,{key:1,index:i.index,onClick:h},{default:e.withCtx(()=>[i.icon&&(i.icon.icon||i.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:i.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.i18n?n.$t(i.title):i.title),1)]),_:2},1032,["index"]))],64))),128))]),_:2},1032,["index"])):(e.openBlock(),e.createBlock(l,{key:1,index:r.index,onClick:h},{default:e.withCtx(()=>[r.icon&&(r.icon.icon||r.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:r.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(o.i18n?n.$t(r.title):r.title),1)]),_:2},1032,["index"]))],64))),128))]),_:2},1032,["popper-class","index"])):(e.openBlock(),e.createBlock(l,{key:1,class:"first-menu",index:c.index,onClick:h},{title:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(o.i18n?n.$t(c.title):c.title),1)]),default:e.withCtx(()=>[c.icon&&(c.icon.icon||c.icon.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:c.icon},null,8,["iconObj"])):e.createCommentVNode("",!0)]),_:2},1032,["index"]))],64))),128))]),_:1},16,["default-active","collapse"])]),_:1}),n.$attrs.mode!=="horizontal"&&o.showCollapseBtn?(e.openBlock(),e.createElementBlock("div",{key:0,class:"collapse-btn",onClick:t[0]||(t[0]=c=>B("collapseChange"))},[o.collapse?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.closeBtn&&(o.closeBtn.icon||o.closeBtn.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:o.closeBtn},null,8,["iconObj"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.openBtn&&(o.openBtn.icon||o.openBtn.type)?(e.openBlock(),e.createBlock(a,{key:0,iconObj:o.openBtn},null,8,["iconObj"])):e.createCommentVNode("",!0)],64))])):e.createCommentVNode("",!0)])}}}],w={install(o){P.forEach(B=>{o.component("vueEleNavPlus",B)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(w),w});
